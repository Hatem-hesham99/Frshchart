import './polyfills.server.mjs';
import{a as D}from"./chunk-U6LCQOCF.mjs";import{a as F,b as p,c as E,d as w,g as M,h as T,i as N,j as q,k as G}from"./chunk-NVYKC62K.mjs";import"./chunk-QZLY374Y.mjs";import{i as k,l as S}from"./chunk-TRQRIWUV.mjs";import{$a as _,Eb as C,Fb as x,Mb as a,Ob as v,Ra as l,V as c,da as y,ea as b,fb as u,pb as f,tb as d,xb as e,yb as t,zb as s}from"./chunk-AIV2EVMX.mjs";import"./chunk-X2SEQXRR.mjs";function V(n,i){n&1&&(e(0,"li"),a(1,"email is required."),t())}function H(n,i){if(n&1&&(e(0,"div",5),y(),e(1,"svg",15),s(2,"path",16),t(),b(),e(3,"span",17),a(4,"Danger"),t(),e(5,"div")(6,"ul",18),u(7,V,2,0,"li"),t()()()),n&2){let o,r=x();l(7),d((o=r.paymantForm.get("details"))!=null&&o.getError("required")?7:-1)}}function R(n,i){n&1&&(e(0,"li"),a(1,"phone is required."),t())}function B(n,i){n&1&&(e(0,"li"),a(1,"enter Egypt phone number ."),t())}function O(n,i){if(n&1&&(e(0,"div",5),y(),e(1,"svg",15),s(2,"path",16),t(),b(),e(3,"span",17),a(4,"Danger"),t(),e(5,"div")(6,"ul",18),u(7,R,2,0,"li")(8,B,2,0,"li"),t()()()),n&2){let o,r,m=x();l(7),d((o=m.paymantForm.get("phone"))!=null&&o.getError("required")?7:-1),l(),d((r=m.paymantForm.get("phone"))!=null&&r.getError("pattern")?8:-1)}}function z(n,i){n&1&&(e(0,"li"),a(1,"city is required."),t())}function A(n,i){if(n&1&&(e(0,"div",5),y(),e(1,"svg",15),s(2,"path",16),t(),b(),e(3,"span",17),a(4,"Danger"),t(),e(5,"div")(6,"ul",18),u(7,z,2,0,"li"),t()()()),n&2){let o,r=x();l(7),d((o=r.paymantForm.get("city"))!=null&&o.getError("required")?7:-1)}}var I=class n{formBuilder=c(q);activatedRoute=c(k);ordersService=c(D);router=c(S);idCard="";errMassage="";paymantForm;ngOnInit(){this.initForm(),this.getIdCard()}initForm(){this.paymantForm=this.formBuilder.group({details:[null,[p.required]],phone:[null,[p.required,p.pattern(/^01[0125][0-9]{8}$/)]],city:[null,[p.required]]})}getIdCard(){this.activatedRoute.paramMap.subscribe({next:i=>{console.log(i.get("id")),this.idCard=i.get("id")}})}paymantFeza(){this.paymantForm.valid&&this.ordersService.CheckoutSession(this.idCard,this.paymantForm.value).subscribe({next:i=>{console.log(i),i.status=="success"&&window.open(i.session.url,"_self")},error:i=>{console.log(i),this.errMassage=" Chack your Cart is empty"}})}paymantCach(){this.paymantForm.valid&&this.ordersService.CheckoutCash(this.idCard,this.paymantForm.value).subscribe({next:i=>{console.log(i),i.status=="success"&&this.router.navigate(["/allorders"])},error:i=>{console.log(i),this.errMassage="Cart is empty"}})}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=_({type:n,selectors:[["app-chackout"]],decls:26,vars:7,consts:[[1,""],[1,"bg-gray-50","rounded","border","shadow-sm","max-w-xl","mx-auto","p-4","my-4",3,"formGroup"],[1,"text-2xl","text-center","text-green-500","capitalize"],["for","details",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","details","id","details","rows","4","placeholder","Write your thoughts here...",1,"block","p-2.5","w-full","text-sm","text-gray-900","bg-gray-50","rounded-lg","border","border-gray-300","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["role","alert",1,"flex","p-4","mb-4","text-sm","text-red-800","rounded-lg","bg-red-50","dark:bg-gray-800","dark:text-red-400"],[1,"mt-2"],["for","phone",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","phone","type","tel","id","phone",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["for","city",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","city","type","tel","id","city",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],[1,"flex","justify-between","items-center"],["type","submit",1,"disabled:bg-gray-600","mt-3","bg-green-600","font-medium","text-white","py-2","px-5","border","rounded","hover:bg-green-900",3,"click","disabled"],["src","/images/mastercard.webp","alt","mastercard",1,"h-[20px]","inline"],[1,"text-3xl","text-center","mt-3","animate-pulse"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"shrink-0","inline","w-4","h-4","me-3","mt-[2px]"],["d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"],[1,"sr-only"],[1,"mt-1.5","list-disc","list-inside"]],template:function(o,r){if(o&1&&(e(0,"section",0)(1,"form",1)(2,"h1",2),a(3," enter details in form "),t(),e(4,"label",3),a(5,"Your details"),t(),s(6,"textarea",4),u(7,H,8,1,"div",5),e(8,"div",6)(9,"label",7),a(10,"enter phone:"),t(),s(11,"input",8),u(12,O,9,2,"div",5),t(),e(13,"div",6)(14,"label",9),a(15,"enter city:"),t(),s(16,"input",10),u(17,A,8,1,"div",5),t(),e(18,"div",11)(19,"button",12),C("click",function(){return r.paymantFeza()}),s(20,"img",13),a(21,"online payment "),t(),e(22,"button",12),C("click",function(){return r.paymantCach()}),a(23," cach payment "),t()(),e(24,"p",14),a(25),t()()()),o&2){let m,g,h;l(),f("formGroup",r.paymantForm),l(6),d((m=r.paymantForm.get("details"))!=null&&m.errors&&((m=r.paymantForm.get("details"))!=null&&m.touched)?7:-1),l(5),d((g=r.paymantForm.get("phone"))!=null&&g.errors&&((g=r.paymantForm.get("phone"))!=null&&g.touched)?12:-1),l(5),d((h=r.paymantForm.get("city"))!=null&&h.errors&&((h=r.paymantForm.get("city"))!=null&&h.touched)?17:-1),l(2),f("disabled",r.paymantForm.invalid),l(3),f("disabled",r.paymantForm.invalid),l(3),v(" ",r.errMassage," ")}},dependencies:[G,M,F,E,w,T,N],encapsulation:2})};export{I as ChackoutComponent};
